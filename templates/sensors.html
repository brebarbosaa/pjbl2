{% extends "base.html" %}

{% block content %}
<div class="vertical-center">
  <div class="container mt-5 p-4" style="background-color: rgba(255, 255, 255, 0.95); border-radius: 10px;">
    <div class="justify-content-center">
      {% if sensors %}
      <table id="view_sensors" class="table table-striped table-bordered" style="width:100%">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Marca</th>
            <th>Modelo</th>
            <th>Unidade</th>
            <th>Tópico</th>
            <th>Ativo</th>
            {% if session.get('is_admin') %}
            <th>Ações</th>
            {% endif %}
          </tr>
        </thead>
        <tbody>
          {% for s in sensors %}
          <tr>
            <td>{{ s.name }}</td>
            <td>{{ s.brand }}</td>
            <td>{{ s.model }}</td>
            <td>{{ s.unit }}</td>
            <td>{{ s.topic }}</td>
            <td>{{ 'Sim' if s.is_active else 'Não' }}</td>
            {% if session.get('is_admin') %}
            <td>
              <a href="{{ url_for('sensor_.edit_sensor', id=s.device_id) }}" class="btn btn-warning btn-sm">Editar</a>
              <a href="{{ url_for('sensor_.del_sensor', id=s.device_id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Tem certeza que deseja deletar este sensor?')">Deletar</a>
            </td>
            {% endif %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
        <p>Ainda não há sensores registrados!</p>
      {% endif %}
      {% if session.get('is_admin') %}
      <form action="{{ url_for('sensor_.register_sensor') }}">
        <p><input type="submit" class="btn btn-success" value="Adicionar Sensor" /></p>
      </form>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
